<!DOCTYPE html>
<html>
	<head>
		<style>
			#container {
				margin: 0px auto;
				width: 500px;
				height: 375px;
				border: 10px #333 solid;
			}
			#videoElement {
				width: 500px;
				height: 375px;
				background-color: #666;
			}
		</style>
	</head>
	
	<body>
		<div id="container">
			<video autoplay="true" id="videoElement">
					
			</video>
		</div>
		
		<script>
			var video = document.querySelector("#videoElement");

			if (navigator.mediaDevices.getUserMedia) {
				navigator.mediaDevices.getUserMedia({video: true}).then(function (stream) {
					video.srcObject = stream;
				});
			}
			
			var canvas = document.createElement('canvas');
			var dims = stream.getVideoTracks()[0].getSettings();
			canvas.width = dims.width;
			canvas.height = dims.height;
			var ctx = canvas.getContext('2d');
			
			setInterval(function() {
				ctx.drawImage(video, 0, 0, canvas.width, canvas.height);
				var data = ctx.getImageData(0, 0, canvas.width, canvas.height).data;
				var numPixels = data.length/4;
				var r = [];
				var g = [];
				var b = [];
				var a = [];
				for (var i = 0; i < data.length; i+=4) {
					r[data[i]]++;
					g[data[i+1]]++;
					b[data[i+2]]++;
					a[data[i+3]]++;
				}
				console.log(r[0], g[0], b[0]);
			}, 1000);
			
		</script>
	</body>
</html>
